<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koç Sigortam Kurulum</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Custom Title Bar for Setup -->
    <div id="title-bar" style="background-color: #0056b3;">
        <div class="title">Koç Sigortam Kurulum</div>
        <div class="controls">
            <button class="control-btn close" id="setup-close">
                <svg viewBox="0 0 10 10"><path d="M1,1 L9,9 M9,1 L1,9" stroke="white" stroke-width="1.5" stroke-linecap="round"></path></svg>
            </button>
        </div>
    </div>

    <div class="setup-container">
        <h2>Hoşgeldiniz</h2>
        <p>Lütfen uygulama web sitesi adresini giriniz:</p>
        <input type="text" id="url-input" placeholder="https://ornek-sigorta.com">
        <button id="save-btn">Kaydet ve Başlat</button>
        <p id="error-msg" style="color: red; display: none; margin-top: 10px;"></p>
    </div>

    <script>
        const urlInput = document.getElementById('url-input');
        const saveBtn = document.getElementById('save-btn');
        const errorMsg = document.getElementById('error-msg');
        const closeBtn = document.getElementById('setup-close');

        saveBtn.addEventListener('click', async () => {
            const url = urlInput.value.trim();
            if (!url) {
                errorMsg.textContent = "Lütfen geçerli bir URL giriniz.";
                errorMsg.style.display = 'block';
                return;
            }
            
            const result = await window.api.saveConfig(url);
            if (!result.success) {
                errorMsg.textContent = "Hata: " + result.error;
                errorMsg.style.display = 'block';
            }
        });

        closeBtn.addEventListener('click', () => {
            window.api.close(); // Main process'i tamamen kapatır
        });
    </script>
</body>
</html>
